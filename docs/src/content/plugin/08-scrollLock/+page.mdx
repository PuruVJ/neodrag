---
title: 'scrollLock'
tagline: 'Prevent page scrolling while dragging'
---

import FrameworkSwitch from '$components/FrameworkSwitch.astro';

The `scrollLock` plugin prevents page or container scrolling during drag operations. Essential for mobile devices and touch interfaces where dragging triggers unwanted scrolling.

```typescript
scrollLock(); // Lock all scrolling
scrollLock({ lockAxis: 'x' }); // Only horizontal scrolling
scrollLock({ container: myContainer }); // Lock specific container
scrollLock({ allowScrollbar: true }); // Keep scrollbars clickable
```

## Basic Usage

<FrameworkSwitch>
<div slot="svelte">

```svelte
<script>
  import { scrollLock } from '@neodrag/svelte';
</script>

<!-- Prevent all scrolling while dragging -->
<div {@attach draggable([scrollLock()])}>
  Drag me - page won't scroll
</div>

<!-- Only prevent horizontal scrolling -->
<div {@attach draggable([scrollLock({ lockAxis: 'x' })])}>
  Vertical scrolling still works
</div>

<!-- Target specific container -->
<div
  {@attach draggable([
    scrollLock({ container: document.getElementById('scroll-area') }),
  ])}
>
  Lock specific container
</div>
```

</div>

<div slot="react">

```tsx
import { useRef } from 'react';
import { scrollLock, useDraggable } from '@neodrag/react';

function ScrollLockExamples() {
  const fullLockRef = useRef<HTMLDivElement>(null);
  const horizontalRef = useRef<HTMLDivElement>(null);
  const containerRef = useRef<HTMLDivElement>(null);

  useDraggable(fullLockRef, [scrollLock()]);
  useDraggable(horizontalRef, [scrollLock({ lockAxis: 'x' })]);
  useDraggable(containerRef, [
    scrollLock({
      container: document.getElementById('scroll-area'),
    }),
  ]);

  return (
    <div>
      <div ref={fullLockRef}>Drag me - page won't scroll</div>
      <div ref={horizontalRef}>Vertical scrolling still works</div>
      <div ref={containerRef}>Lock specific container</div>
    </div>
  );
}
```

</div>

<div slot="vue">

```vue
<script setup>
import { scrollLock, vDraggable } from '@neodrag/vue';
</script>

<template>
  <div>
    <div v-draggable="[scrollLock()]">
      Drag me - page won't scroll
    </div>

    <div v-draggable="[scrollLock({ lockAxis: 'x' })]">
      Vertical scrolling still works
    </div>

    <div
      v-draggable="[
        scrollLock({ container: $el.querySelector('#scroll-area') }),
      ]"
    >
      Lock specific container
    </div>
  </div>
</template>
```

</div>

<div slot="solid">

```tsx
import { createSignal } from 'solid-js';
import { scrollLock, createDraggable } from '@neodrag/solid';

function ScrollLockExamples() {
  const { as: fullLockDiv } = createDraggable(() => [scrollLock()]);
  const { as: horizontalDiv } = createDraggable(() => [
    scrollLock({ lockAxis: 'x' }),
  ]);
  const { as: containerDiv } = createDraggable(() => [
    scrollLock({ container: document.getElementById('scroll-area') }),
  ]);

  return (
    <div>
      <fullLockDiv>Drag me - page won't scroll</fullLockDiv>
      <horizontalDiv>Vertical scrolling still works</horizontalDiv>
      <containerDiv>Lock specific container</containerDiv>
    </div>
  );
}
```

</div>

<div slot="vanilla">

```typescript
import { draggable, scrollLock } from '@neodrag/vanilla';

const fullLock = document.getElementById('full-lock');
const horizontal = document.getElementById('horizontal');
const container = document.getElementById('container');

draggable(fullLock, [scrollLock()]);
draggable(horizontal, [scrollLock({ lockAxis: 'x' })]);
draggable(container, [
  scrollLock({
    container: document.getElementById('scroll-area'),
  }),
]);
```

</div>
</FrameworkSwitch>

## Dynamic Configuration

<FrameworkSwitch>
<div slot="svelte">

```svelte
<script>
  import { scrollLock, Compartment } from '@neodrag/svelte';

  let lockMode = $state('both');
  let allowScrollbar = $state(false);
  let containerRef = $state();

  const scrollLockComp = Compartment.of(() => {
    if (lockMode === 'none') return null;

    return scrollLock({
      lockAxis: lockMode,
      allowScrollbar: allowScrollbar,
      container: containerRef,
    });
  });
</script>

<div bind:this={containerRef} class="scroll-container">
  <div {@attach draggable([scrollLockComp])}>
    Drag me (lock: {lockMode})
  </div>

  <div>
    {#each Array(50) as _, i}
      <p>Scrollable content line {i + 1}</p>
    {/each}
  </div>
</div>

<div class="controls">
  <select bind:value={lockMode}>
    <option value="both">Both Axes</option>
    <option value="x">Horizontal Only</option>
    <option value="y">Vertical Only</option>
    <option value="none">No Lock</option>
  </select>

  <label>
    <input type="checkbox" bind:checked={allowScrollbar} />
    Allow Scrollbar
  </label>
</div>
```

</div>

<div slot="react">

```tsx
import { useState, useRef } from 'react';
import {
  scrollLock,
  useDraggable,
  useCompartment,
} from '@neodrag/react';

function DynamicScrollLock() {
  const containerRef = useRef<HTMLDivElement>(null);
  const elementRef = useRef<HTMLDivElement>(null);
  const [lockMode, setLockMode] = useState('both');
  const [allowScrollbar, setAllowScrollbar] = useState(false);

  const scrollLockComp = useCompartment(() => {
    if (lockMode === 'none') return null;

    return scrollLock({
      lockAxis: lockMode,
      allowScrollbar: allowScrollbar,
      container: containerRef.current,
    });
  }, [lockMode, allowScrollbar]);

  useDraggable(elementRef, [scrollLockComp]);

  return (
    <div>
      <div ref={containerRef} className="scroll-container">
        <div ref={elementRef}>Drag me (lock: {lockMode})</div>
        <div>
          {Array.from({ length: 50 }, (_, i) => (
            <p key={i}>Scrollable content line {i + 1}</p>
          ))}
        </div>
      </div>

      <div className="controls">
        <select
          value={lockMode}
          onChange={(e) => setLockMode(e.target.value)}
        >
          <option value="both">Both Axes</option>
          <option value="x">Horizontal Only</option>
          <option value="y">Vertical Only</option>
          <option value="none">No Lock</option>
        </select>

        <label>
          <input
            type="checkbox"
            checked={allowScrollbar}
            onChange={(e) => setAllowScrollbar(e.target.checked)}
          />
          Allow Scrollbar
        </label>
      </div>
    </div>
  );
}
```

</div>

<div slot="vue">

```vue
<script setup>
import { ref } from 'vue';
import { scrollLock, vDraggable, useCompartment } from '@neodrag/vue';

const containerRef = ref();
const lockMode = ref('both');
const allowScrollbar = ref(false);

const scrollLockComp = useCompartment(() => {
  if (lockMode.value === 'none') return null;

  return scrollLock({
    lockAxis: lockMode.value,
    allowScrollbar: allowScrollbar.value,
    container: containerRef.value,
  });
}, [lockMode, allowScrollbar]);
</script>

<template>
  <div>
    <div ref="containerRef" class="scroll-container">
      <div v-draggable="[scrollLockComp]">
        Drag me (lock: {{ lockMode }})
      </div>

      <div>
        <p v-for="i in 50" :key="i">
          Scrollable content line {{ i }}
        </p>
      </div>
    </div>

    <div class="controls">
      <select v-model="lockMode">
        <option value="both">Both Axes</option>
        <option value="x">Horizontal Only</option>
        <option value="y">Vertical Only</option>
        <option value="none">No Lock</option>
      </select>

      <label>
        <input type="checkbox" v-model="allowScrollbar" />
        Allow Scrollbar
      </label>
    </div>
  </div>
</template>
```

</div>

<div slot="solid">

```tsx
import { createSignal } from 'solid-js';
import {
  scrollLock,
  createDraggable,
  createCompartment,
} from '@neodrag/solid';

function DynamicScrollLock() {
  const [container, setContainer] = createSignal<HTMLDivElement>();
  const [lockMode, setLockMode] = createSignal('both');
  const [allowScrollbar, setAllowScrollbar] = createSignal(false);

  const scrollLockComp = createCompartment(() => {
    if (lockMode() === 'none') return null;

    return scrollLock({
      lockAxis: lockMode(),
      allowScrollbar: allowScrollbar(),
      container: container(),
    });
  });

  const { as: draggableDiv } = createDraggable(() => [
    scrollLockComp,
  ]);

  return (
    <div>
      <div ref={setContainer} class="scroll-container">
        <draggableDiv>Drag me (lock: {lockMode()})</draggableDiv>
        <div>
          {Array.from({ length: 50 }, (_, i) => (
            <p>Scrollable content line {i + 1}</p>
          ))}
        </div>
      </div>

      <div class="controls">
        <select
          value={lockMode()}
          onChange={(e) => setLockMode(e.target.value)}
        >
          <option value="both">Both Axes</option>
          <option value="x">Horizontal Only</option>
          <option value="y">Vertical Only</option>
          <option value="none">No Lock</option>
        </select>

        <label>
          <input
            type="checkbox"
            checked={allowScrollbar()}
            onChange={(e) => setAllowScrollbar(e.target.checked)}
          />
          Allow Scrollbar
        </label>
      </div>
    </div>
  );
}
```

</div>

<div slot="vanilla">

```typescript
import { draggable, scrollLock, Compartment } from '@neodrag/vanilla';

const container = document.getElementById('container');
const element = document.getElementById('draggable');
const lockSelect = document.getElementById('lock-select');
const scrollbarToggle = document.getElementById('scrollbar-toggle');

let lockMode = 'both';
let allowScrollbar = false;

const scrollLockComp = new Compartment(() => {
  if (lockMode === 'none') return null;

  return scrollLock({
    lockAxis: lockMode,
    allowScrollbar: allowScrollbar,
    container: container,
  });
});

draggable(element, [scrollLockComp]);

lockSelect.addEventListener('change', (e) => {
  lockMode = e.target.value;
  scrollLockComp.current = scrollLockComp.current; // Trigger update
});

scrollbarToggle.addEventListener('change', (e) => {
  allowScrollbar = e.target.checked;
  scrollLockComp.current = scrollLockComp.current; // Trigger update
});
```

</div>
</FrameworkSwitch>

## Common Use Cases

### Mobile-Friendly Dragging

```typescript
// Prevent mobile bounce scrolling
scrollLock({
  lockAxis: 'both',
  allowScrollbar: false, // Hide scrollbars on mobile
});
```

### Modal/Overlay Dragging

```typescript
// Lock body scrolling when dragging modal
scrollLock({
  container: document.body,
  lockAxis: 'both',
});
```

### Horizontal Slider

```typescript
// Allow vertical scrolling, prevent horizontal
scrollLock({
  lockAxis: 'x',
  allowScrollbar: true, // Keep vertical scrollbar
});
```

### Canvas/Editor Tools

```typescript
// Lock scrolling within canvas container
scrollLock({
  container: () => document.getElementById('canvas-container'),
  lockAxis: 'both',
});
```

## Combining with Other Plugins

### With Bounds

```typescript
const plugins = [scrollLock(), bounds(BoundsFrom.viewport())];
```

### Touch-Optimized Setup

```typescript
const plugins = [
  scrollLock({ lockAxis: 'both' }),
  threshold({ distance: 5, delay: 100 }), // Prevent accidental drags
  touchAction('none'), // Disable browser touch behaviors
];
```

### Conditional ScrollLock

```typescript
// Only lock on touch devices
const isTouchDevice = 'ontouchstart' in window;
const plugins = [
  isTouchDevice ? scrollLock() : null,
  bounds(BoundsFrom.parent()),
].filter(Boolean);
```

## Platform Considerations

### iOS Safari

```typescript
// iOS requires specific handling
scrollLock({
  lockAxis: 'both',
  allowScrollbar: false, // Important for iOS
  container: document.body,
});
```

### Desktop vs Mobile

```typescript
const isMobile = /Mobi|Android/i.test(navigator.userAgent);

scrollLock({
  lockAxis: isMobile ? 'both' : 'y', // More aggressive on mobile
  allowScrollbar: !isMobile, // Keep scrollbars on desktop
});
```

## How It Works

The scrollLock plugin prevents scrolling by temporarily modifying CSS properties:

**During drag start:**

1. **Stores original styles** - `user-select`, `touch-action`, `overflow`
2. **Applies lock styles**:
   - `user-select: none` - Prevents text selection
   - `overflow: hidden` - Hides scrollbars (if `allowScrollbar: false`)
   - `touch-action: pan-x/pan-y/none` - Controls touch scrolling direction

**During drag end:** 3. **Restores original styles** - Everything returns to normal

**Target selection:**

- If `container` specified, applies to that element
- If `container` is `document.documentElement` or not specified, applies to `document.body`
- Function containers are called dynamically each time

## API Reference

```typescript
function scrollLock(
  options?: {
    lockAxis?: 'x' | 'y' | 'both';
    container?: HTMLElement | (() => HTMLElement);
    allowScrollbar?: boolean;
  } | null,
): Plugin;
```

**Options:**

- `lockAxis` - Which scrolling to prevent (`'both'` default)
  - `'x'` - Only horizontal scrolling locked
  - `'y'` - Only vertical scrolling locked
  - `'both'` - All scrolling locked
- `container` - Where to apply scroll lock (`document.documentElement` default)
  - `HTMLElement` - Specific element
  - `() => HTMLElement` - Dynamic element selection
- `allowScrollbar` - Keep scrollbars clickable (`false` default)
  - `true` - Scrollbars remain visible and functional
  - `false` - Scrollbars hidden via `overflow: hidden`

**Returns:** A plugin object for use with draggable.

**Browser Support:** All modern browsers, with special handling for iOS Safari touch behaviors.
