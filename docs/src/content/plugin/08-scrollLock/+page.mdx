---
title: 'scrollLock'
tagline: 'Prevent page scrolling while dragging'
---

import FrameworkSwitch from '$components/FrameworkSwitch.astro';

## What it does

The `scrollLock` plugin prevents the page (or specific containers) from scrolling while dragging. Essential for mobile devices and touch interfaces where dragging often triggers unwanted scrolling.

```typescript
scrollLock(); // Lock all scrolling
scrollLock({ lockAxis: 'x' }); // Only lock horizontal scrolling
scrollLock({ container: myContainer }); // Lock specific container
scrollLock({ allowScrollbar: true }); // Allow scrollbar clicking
```

## Basic Usage

<FrameworkSwitch>
<div slot="svelte">

```svelte
<script>
  import { scrollLock } from '@neodrag/svelte';
</script>

<!-- Prevent all scrolling while dragging -->
<div {@attach draggable([scrollLock()])}>
  Drag me - page won't scroll
</div>

<!-- Only prevent horizontal scrolling -->
<div {@attach draggable([scrollLock({ lockAxis: 'x' })])}>
  Vertical scrolling still works
</div>
```

</div>

<div slot="react">

```tsx
import { useRef } from 'react';
import { scrollLock, useDraggable } from '@neodrag/react';

function ScrollLockExamples() {
  const fullLockRef = useRef<HTMLDivElement>(null);
  const horizontalRef = useRef<HTMLDivElement>(null);

  useDraggable(fullLockRef, [scrollLock()]);
  useDraggable(horizontalRef, [scrollLock({ lockAxis: 'x' })]);

  return (
    <div>
      <div ref={fullLockRef}>Drag me - page won't scroll</div>
      <div ref={horizontalRef}>Vertical scrolling still works</div>
    </div>
  );
}
```

</div>

<div slot="vue">

```vue
<script setup>
import { scrollLock, vDraggable } from '@neodrag/vue';
</script>

<template>
  <div>
    <div v-draggable="[scrollLock()]">
      Drag me - page won't scroll
    </div>

    <div v-draggable="[scrollLock({ lockAxis: 'x' })]">
      Vertical scrolling still works
    </div>
  </div>
</template>
```

</div>

<div slot="solid">

```tsx
import { createSignal } from 'solid-js';
import { scrollLock, useDraggable } from '@neodrag/solid';

function ScrollLockExamples() {
  const [fullLock, setFullLock] = createSignal<HTMLDivElement>();
  const [horizontal, setHorizontal] = createSignal<HTMLDivElement>();

  useDraggable(fullLock, [scrollLock()]);
  useDraggable(horizontal, [scrollLock({ lockAxis: 'x' })]);

  return (
    <div>
      <div ref={setFullLock}>Drag me - page won't scroll</div>
      <div ref={setHorizontal}>Vertical scrolling still works</div>
    </div>
  );
}
```

</div>

<div slot="vanilla">

```typescript
import { scrollLock, Draggable } from '@neodrag/vanilla';

const fullLock = document.getElementById('full-lock');
const horizontal = document.getElementById('horizontal');

new Draggable(fullLock, [scrollLock()]);
new Draggable(horizontal, [scrollLock({ lockAxis: 'x' })]);
```

</div>
</FrameworkSwitch>

## ScrollLock Options

### Lock Specific Axes

```typescript
scrollLock({ lockAxis: 'both' }); // Default - lock both axes
scrollLock({ lockAxis: 'x' }); // Only horizontal scrolling locked
scrollLock({ lockAxis: 'y' }); // Only vertical scrolling locked
```

### Target Specific Containers

```typescript
// Lock scrolling on a specific element
scrollLock({ container: document.getElementById('my-container') });

// Lock scrolling on a dynamically determined element
scrollLock({ container: () => getCurrentScrollContainer() });

// Lock entire page (default)
scrollLock({ container: document.documentElement });
```

### Allow Scrollbar Interaction

```typescript
scrollLock({ allowScrollbar: false }); // Default - hide scrollbars
scrollLock({ allowScrollbar: true }); // Keep scrollbars clickable
```

## Dynamic ScrollLock

Configure scroll locking based on conditions:

<FrameworkSwitch>
<div slot="svelte">

```svelte
<script>
  import { scrollLock, createCompartment } from '@neodrag/svelte';

  let lockMode = $state('both');
  let allowScrollbar = $state(false);
  let containerRef = $state();

  const scrollLockComp = createCompartment(() => {
    const options = {
      lockAxis: lockMode,
      allowScrollbar: allowScrollbar,
    };

    // Add container if we have a reference
    if (containerRef && lockMode !== 'none') {
      options.container = containerRef;
    }

    return lockMode === 'none' ? null : scrollLock(options);
  });
</script>

<div bind:this={containerRef} class="scroll-container">
  <div {@attach draggable(() => [scrollLockComp].filter(Boolean))}>
    Drag me (lock: {lockMode})
  </div>

  <div class="long-content">
    {#each Array(50) as _, i}
      <p>Scrollable content line {i + 1}</p>
    {/each}
  </div>
</div>

<div class="controls">
  <label>
    Lock Mode:
    <select bind:value={lockMode}>
      <option value="both">Both Axes</option>
      <option value="x">Horizontal Only</option>
      <option value="y">Vertical Only</option>
      <option value="none">No Lock</option>
    </select>
  </label>

  <label>
    <input type="checkbox" bind:checked={allowScrollbar} />
    Allow Scrollbar
  </label>
</div>

<style>
  .scroll-container {
    height: 300px;
    overflow: auto;
    border: 2px solid #ddd;
    padding: 20px;
    margin-bottom: 20px;
  }

  .long-content {
    margin-top: 50px;
  }

  .controls {
    display: flex;
    gap: 20px;
    align-items: center;
  }
</style>
```

</div>

<div slot="react">

```tsx
import { useRef, useState } from 'react';
import {
  scrollLock,
  useDraggable,
  useCompartment,
} from '@neodrag/react';

function DynamicScrollLock() {
  const containerRef = useRef<HTMLDivElement>(null);
  const elementRef = useRef<HTMLDivElement>(null);
  const [lockMode, setLockMode] = useState('both');
  const [allowScrollbar, setAllowScrollbar] = useState(false);

  const scrollLockComp = useCompartment(() => {
    if (lockMode === 'none') return null;

    const options = {
      lockAxis: lockMode,
      allowScrollbar: allowScrollbar,
      container: containerRef.current,
    };

    return scrollLock(options);
  }, [lockMode, allowScrollbar]);

  useDraggable(elementRef, () => [scrollLockComp].filter(Boolean));

  return (
    <div>
      <div
        ref={containerRef}
        style={{
          height: '300px',
          overflow: 'auto',
          border: '2px solid #ddd',
          padding: '20px',
          marginBottom: '20px',
        }}
      >
        <div
          ref={elementRef}
          style={{
            padding: '10px',
            background: '#f0f0f0',
            cursor: 'move',
            marginBottom: '20px',
          }}
        >
          Drag me (lock: {lockMode})
        </div>

        <div>
          {Array.from({ length: 50 }, (_, i) => (
            <p key={i}>Scrollable content line {i + 1}</p>
          ))}
        </div>
      </div>

      <div
        style={{ display: 'flex', gap: '20px', alignItems: 'center' }}
      >
        <label>
          Lock Mode:
          <select
            value={lockMode}
            onChange={(e) => setLockMode(e.target.value)}
          >
            <option value="both">Both Axes</option>
            <option value="x">Horizontal Only</option>
            <option value="y">Vertical Only</option>
            <option value="none">No Lock</option>
          </select>
        </label>

        <label>
          <input
            type="checkbox"
            checked={allowScrollbar}
            onChange={(e) => setAllowScrollbar(e.target.checked)}
          />
          Allow Scrollbar
        </label>
      </div>
    </div>
  );
}
```

</div>

<div slot="vue">

```vue
<script setup>
import { ref } from 'vue';
import { scrollLock, vDraggable, useCompartment } from '@neodrag/vue';

const containerRef = ref();
const lockMode = ref('both');
const allowScrollbar = ref(false);

const scrollLockComp = useCompartment(() => {
  if (lockMode.value === 'none') return null;

  const options = {
    lockAxis: lockMode.value,
    allowScrollbar: allowScrollbar.value,
    container: containerRef.value,
  };

  return scrollLock(options);
});

const plugins = () => [scrollLockComp].filter(Boolean);
</script>

<template>
  <div>
    <div ref="containerRef" class="scroll-container">
      <div v-draggable="plugins" class="draggable">
        Drag me (lock: {{ lockMode }})
      </div>

      <div>
        <p v-for="i in 50" :key="i">
          Scrollable content line {{ i }}
        </p>
      </div>
    </div>

    <div class="controls">
      <label>
        Lock Mode:
        <select v-model="lockMode">
          <option value="both">Both Axes</option>
          <option value="x">Horizontal Only</option>
          <option value="y">Vertical Only</option>
          <option value="none">No Lock</option>
        </select>
      </label>

      <label>
        <input type="checkbox" v-model="allowScrollbar" />
        Allow Scrollbar
      </label>
    </div>
  </div>
</template>

<style scoped>
.scroll-container {
  height: 300px;
  overflow: auto;
  border: 2px solid #ddd;
  padding: 20px;
  margin-bottom: 20px;
}

.draggable {
  padding: 10px;
  background: #f0f0f0;
  cursor: move;
  margin-bottom: 20px;
}

.controls {
  display: flex;
  gap: 20px;
  align-items: center;
}
</style>
```

</div>

<div slot="solid">

```tsx
import { createSignal } from 'solid-js';
import {
  scrollLock,
  useDraggable,
  createCompartment,
} from '@neodrag/solid';

function DynamicScrollLock() {
  const [container, setContainer] = createSignal<HTMLDivElement>();
  const [element, setElement] = createSignal<HTMLDivElement>();
  const [lockMode, setLockMode] = createSignal('both');
  const [allowScrollbar, setAllowScrollbar] = createSignal(false);

  const scrollLockComp = createCompartment(() => {
    if (lockMode() === 'none') return null;

    const options = {
      lockAxis: lockMode(),
      allowScrollbar: allowScrollbar(),
      container: container(),
    };

    return scrollLock(options);
  });

  useDraggable(element, [scrollLockComp]);

  return (
    <div>
      <div
        ref={setContainer}
        style={{
          height: '300px',
          overflow: 'auto',
          border: '2px solid #ddd',
          padding: '20px',
          'margin-bottom': '20px',
        }}
      >
        <div
          ref={setElement}
          style={{
            padding: '10px',
            background: '#f0f0f0',
            cursor: 'move',
            'margin-bottom': '20px',
          }}
        >
          Drag me (lock: {lockMode()})
        </div>

        <div>
          <For each={Array.from({ length: 50 }, (_, i) => i)}>
            {(i) => <p>Scrollable content line {i + 1}</p>}
          </For>
        </div>
      </div>

      <div
        style={{
          display: 'flex',
          gap: '20px',
          'align-items': 'center',
        }}
      >
        <label>
          Lock Mode:
          <select
            value={lockMode()}
            onChange={(e) => setLockMode(e.target.value)}
          >
            <option value="both">Both Axes</option>
            <option value="x">Horizontal Only</option>
            <option value="y">Vertical Only</option>
            <option value="none">No Lock</option>
          </select>
        </label>

        <label>
          <input
            type="checkbox"
            checked={allowScrollbar()}
            onChange={(e) => setAllowScrollbar(e.target.checked)}
          />
          Allow Scrollbar
        </label>
      </div>
    </div>
  );
}
```

</div>

<div slot="vanilla">

```typescript
import { scrollLock, Compartment, Draggable } from '@neodrag/vanilla';

const container = document.getElementById('container');
const element = document.getElementById('element');
const lockSelect = document.getElementById('lock-select');
const scrollbarToggle = document.getElementById('scrollbar-toggle');

let lockMode = 'both';
let allowScrollbar = false;

const scrollLockComp = new Compartment(() => {
  if (lockMode === 'none') return null;

  return scrollLock({
    lockAxis: lockMode,
    allowScrollbar: allowScrollbar,
    container: container,
  });
});

new Draggable(element, () => [scrollLockComp].filter(Boolean));

lockSelect.addEventListener('change', (e) => {
  lockMode = e.target.value;
  scrollLockComp.current = scrollLockComp.current; // Trigger update
});

scrollbarToggle.addEventListener('change', (e) => {
  allowScrollbar = e.target.checked;
  scrollLockComp.current = scrollLockComp.current; // Trigger update
});
```

</div>
</FrameworkSwitch>

## Common Use Cases

### Mobile-Friendly Dragging

```typescript
// Prevent mobile bounce scrolling during drag
scrollLock({
  lockAxis: 'both',
  allowScrollbar: false, // Hide scrollbars on mobile
});
```

### Modal/Overlay Dragging

```typescript
// Lock body scrolling when dragging modal
scrollLock({
  container: document.body,
  lockAxis: 'both',
});
```

### Horizontal Slider

```typescript
// Allow vertical scrolling, prevent horizontal
scrollLock({
  lockAxis: 'x',
  allowScrollbar: true, // Keep vertical scrollbar
});
```

### Canvas/Editor Tools

```typescript
// Lock scrolling within canvas container
scrollLock({
  container: () => document.getElementById('canvas-container'),
  lockAxis: 'both',
});
```

## Combining with Other Plugins

### With Bounds

```typescript
// Lock scrolling and constrain to viewport
const plugins = [scrollLock(), bounds(BoundsFrom.viewport())];
```

### With Touch-Optimized Setup

```typescript
// Complete mobile-friendly setup
const plugins = [
  scrollLock({ lockAxis: 'both' }),
  threshold({ distance: 5, delay: 100 }), // Prevent accidental drags
  touchAction('none'), // Disable browser touch behaviors
];
```

### Conditional ScrollLock

```typescript
// Only lock on touch devices
const plugins = [
  isTouchDevice ? scrollLock() : null,
  bounds(BoundsFrom.parent()),
].filter(Boolean);
```

## Platform Considerations

### iOS Safari

```typescript
// iOS requires specific handling for scroll prevention
scrollLock({
  lockAxis: 'both',
  allowScrollbar: false, // Important for iOS
  container: document.body,
});
```

### Desktop vs Mobile

```typescript
// Different behavior based on platform
const isMobile = /Mobi|Android/i.test(navigator.userAgent);

scrollLock({
  lockAxis: isMobile ? 'both' : 'y', // More aggressive on mobile
  allowScrollbar: !isMobile, // Keep scrollbars on desktop
});
```

## How It Works

The scrollLock plugin prevents scrolling by temporarily modifying CSS properties:

**During drag start:**

1. **Stores original styles** - `user-select`, `touch-action`, `overflow`
2. **Applies lock styles**:
   - `user-select: none` - Prevents text selection
   - `overflow: hidden` - Hides scrollbars (if `allowScrollbar: false`)
   - `touch-action: pan-x/pan-y/none` - Controls touch scrolling direction

**During drag end:** 3. **Restores original styles** - Everything returns to normal

**Target selection:**

- If `container` is specified, applies to that element
- If `container` is `document.documentElement` or not specified, applies to `document.body`
- Function containers are called dynamically each time

## API Reference

```typescript
function scrollLock(
  options?: {
    lockAxis?: 'x' | 'y' | 'both';
    container?: HTMLElement | (() => HTMLElement);
    allowScrollbar?: boolean;
  } | null,
): Plugin;
```

**Options:**

- `lockAxis` - Which scrolling to prevent (`'both'` default)
  - `'x'` - Only horizontal scrolling locked
  - `'y'` - Only vertical scrolling locked
  - `'both'` - All scrolling locked
- `container` - Where to apply scroll lock (`document.documentElement` default)
  - `HTMLElement` - Specific element
  - `() => HTMLElement` - Dynamic element selection
- `allowScrollbar` - Keep scrollbars clickable (`false` default)
  - `true` - Scrollbars remain visible and functional
  - `false` - Scrollbars hidden via `overflow: hidden`

**Returns:** A plugin object for use with draggable.

**Browser Support:** All modern browsers, with special handling for iOS Safari touch behaviors.
