---
title: 'scrollLock'
tagline: 'Prevent page scrolling while dragging'
---

import FrameworkSwitch from '$components/FrameworkSwitch.astro';

The `scrollLock` plugin prevents page or container scrolling during drag operations. Essential for mobile devices and touch interfaces where dragging triggers unwanted scrolling.

```typescript
scrollLock(); // Lock all scrolling
scrollLock({ lockAxis: 'x' }); // Only horizontal scrolling
scrollLock({ container: myContainer }); // Lock specific container
scrollLock({ allowScrollbar: true }); // Keep scrollbars clickable
```

## Basic Usage

<FrameworkSwitch>
<div slot="svelte">

```svelte
<script>
  import { scrollLock } from '@neodrag/svelte';
</script>

<!-- Prevent all scrolling while dragging -->
<div {@attach draggable([scrollLock()])}>
  Drag me - page won't scroll
</div>

<!-- Only prevent horizontal scrolling -->
<div {@attach draggable([scrollLock({ lockAxis: 'x' })])}>
  Vertical scrolling still works
</div>

<!-- Target specific container -->
<div bind:this={scrollContainer} class="scroll-area">
  <div
    {@attach draggable([
      scrollLock({ container: () => scrollContainer }),
    ])}
  >
    Lock specific container
  </div>
</div>
```

</div>

<div slot="react">

```tsx
import { useRef } from 'react';
import { scrollLock, useDraggable } from '@neodrag/react';

function ScrollLockExamples() {
  const fullLockRef = useRef<HTMLDivElement>(null);
  const horizontalRef = useRef<HTMLDivElement>(null);
  const containerRef = useRef<HTMLDivElement>(null);
  const scrollAreaRef = useRef<HTMLDivElement>(null);

  useDraggable(fullLockRef, [scrollLock()]);
  useDraggable(horizontalRef, [scrollLock({ lockAxis: 'x' })]);
  useDraggable(containerRef, [
    scrollLock({ container: () => scrollAreaRef.current! }),
  ]);

  return (
    <div>
      <div ref={fullLockRef}>Drag me - page won't scroll</div>
      <div ref={horizontalRef}>Vertical scrolling still works</div>

      <div ref={scrollAreaRef} className="scroll-area">
        <div ref={containerRef}>Lock specific container</div>
      </div>
    </div>
  );
}
```

</div>

<div slot="vue">

```vue
<script setup>
import { ref } from 'vue';
import { scrollLock, vDraggable } from '@neodrag/vue';

const scrollContainer = ref();
</script>

<template>
  <div>
    <div v-draggable="[scrollLock()]">
      Drag me - page won't scroll
    </div>

    <div v-draggable="[scrollLock({ lockAxis: 'x' })]">
      Vertical scrolling still works
    </div>

    <div ref="scrollContainer" class="scroll-area">
      <div
        v-draggable="[
          scrollLock({ container: () => scrollContainer }),
        ]"
      >
        Lock specific container
      </div>
    </div>
  </div>
</template>
```

</div>

<div slot="solid">

```tsx
import { createSignal } from 'solid-js';
import { scrollLock, useDraggable } from '@neodrag/solid';

function ScrollLockExamples() {
  const [fullLock, setFullLock] = createSignal<HTMLElement | null>(
    null,
  );
  const [horizontal, setHorizontal] =
    createSignal<HTMLElement | null>(null);
  const [container, setContainer] = createSignal<HTMLElement | null>(
    null,
  );
  const [scrollArea, setScrollArea] =
    createSignal<HTMLElement | null>(null);

  useDraggable(fullLock, [scrollLock()]);
  useDraggable(horizontal, [scrollLock({ lockAxis: 'x' })]);
  useDraggable(container, [
    scrollLock({ container: () => scrollArea()! }),
  ]);

  return (
    <div>
      <div ref={setFullLock}>Drag me - page won't scroll</div>
      <div ref={setHorizontal}>Vertical scrolling still works</div>

      <div ref={setScrollArea} class="scroll-area">
        <div ref={setContainer}>Lock specific container</div>
      </div>
    </div>
  );
}
```

</div>

<div slot="vanilla">

```typescript
import { scrollLock, Draggable } from '@neodrag/vanilla';

const fullLock = document.getElementById('full-lock');
const horizontal = document.getElementById('horizontal');
const container = document.getElementById('container');
const scrollArea = document.getElementById('scroll-area');

new Draggable(fullLock, [scrollLock()]);
new Draggable(horizontal, [scrollLock({ lockAxis: 'x' })]);
new Draggable(container, [
  scrollLock({ container: () => scrollArea }),
]);
```

</div>
</FrameworkSwitch>

## Dynamic Configuration

<FrameworkSwitch>
<div slot="svelte">

```svelte
<script>
  import { scrollLock, Compartment } from '@neodrag/svelte';

  let lockMode = $state('both');
  let allowScrollbar = $state(false);
  let targetContainer = $state(null);

  const scrollLockComp = Compartment.of(() => {
    if (lockMode === 'none') return null;

    return scrollLock({
      lockAxis: lockMode,
      allowScrollbar: allowScrollbar,
      container: targetContainer,
    });
  });
</script>

<div bind:this={targetContainer} class="scroll-container">
  <div {@attach draggable(() => [scrollLockComp])}>
    Lock Mode: {lockMode}
    <br />
    Scrollbar: {allowScrollbar ? 'visible' : 'hidden'}
  </div>
</div>

<div class="controls">
  <label>
    Lock Mode:
    <select bind:value={lockMode}>
      <option value="both">Both Axes</option>
      <option value="x">X-Axis Only</option>
      <option value="y">Y-Axis Only</option>
      <option value="none">Disabled</option>
    </select>
  </label>

  <label>
    <input type="checkbox" bind:checked={allowScrollbar} />
    Allow Scrollbar
  </label>
</div>
```

</div>

<div slot="react">

```tsx
import { useState, useRef } from 'react';
import {
  scrollLock,
  useDraggable,
  useCompartment,
} from '@neodrag/react';

function DynamicScrollLock() {
  const ref = useRef<HTMLDivElement>(null);
  const containerRef = useRef<HTMLDivElement>(null);
  const [lockMode, setLockMode] = useState<
    'both' | 'x' | 'y' | 'none'
  >('both');
  const [allowScrollbar, setAllowScrollbar] = useState(false);

  const scrollLockComp = useCompartment(() => {
    if (lockMode === 'none') return null;

    return scrollLock({
      lockAxis: lockMode,
      allowScrollbar: allowScrollbar,
      container: () => containerRef.current!,
    });
  }, [lockMode, allowScrollbar]);

  useDraggable(ref, () => [scrollLockComp]);

  return (
    <div>
      <div ref={containerRef} className="scroll-container">
        <div ref={ref}>
          Lock Mode: {lockMode}
          <br />
          Scrollbar: {allowScrollbar ? 'visible' : 'hidden'}
        </div>
      </div>

      <div className="controls">
        <label>
          Lock Mode:
          <select
            value={lockMode}
            onChange={(e) => setLockMode(e.target.value as any)}
          >
            <option value="both">Both Axes</option>
            <option value="x">X-Axis Only</option>
            <option value="y">Y-Axis Only</option>
            <option value="none">Disabled</option>
          </select>
        </label>

        <label>
          <input
            type="checkbox"
            checked={allowScrollbar}
            onChange={(e) => setAllowScrollbar(e.target.checked)}
          />
          Allow Scrollbar
        </label>
      </div>
    </div>
  );
}
```

</div>

<div slot="vue">

```vue
<script setup>
import { ref } from 'vue';
import { scrollLock, vDraggable, useCompartment } from '@neodrag/vue';

const lockMode = ref('both');
const allowScrollbar = ref(false);
const targetContainer = ref();

const scrollLockComp = useCompartment(() => {
  if (lockMode.value === 'none') return null;

  return scrollLock({
    lockAxis: lockMode.value,
    allowScrollbar: allowScrollbar.value,
    container: () => targetContainer.value,
  });
});
</script>

<template>
  <div>
    <div ref="targetContainer" class="scroll-container">
      <div v-draggable="() => [scrollLockComp]">
        Lock Mode: {{ lockMode }}
        <br />
        Scrollbar: {{ allowScrollbar ? 'visible' : 'hidden' }}
      </div>
    </div>

    <div class="controls">
      <label>
        Lock Mode:
        <select v-model="lockMode">
          <option value="both">Both Axes</option>
          <option value="x">X-Axis Only</option>
          <option value="y">Y-Axis Only</option>
          <option value="none">Disabled</option>
        </select>
      </label>

      <label>
        <input v-model="allowScrollbar" type="checkbox" />
        Allow Scrollbar
      </label>
    </div>
  </div>
</template>
```

</div>

<div slot="solid">

```tsx
import { createSignal } from 'solid-js';
import {
  scrollLock,
  useDraggable,
  createCompartment,
} from '@neodrag/solid';

function DynamicScrollLock() {
  const [element, setElement] = createSignal<HTMLElement | null>(
    null,
  );
  const [targetContainer, setTargetContainer] =
    createSignal<HTMLElement | null>(null);
  const [lockMode, setLockMode] = createSignal<
    'both' | 'x' | 'y' | 'none'
  >('both');
  const [allowScrollbar, setAllowScrollbar] = createSignal(false);

  const scrollLockComp = createCompartment(() => {
    if (lockMode() === 'none') return null;

    return scrollLock({
      lockAxis: lockMode(),
      allowScrollbar: allowScrollbar(),
      container: () => targetContainer()!,
    });
  });

  useDraggable(element, [scrollLockComp]);

  return (
    <div>
      <div ref={setTargetContainer} class="scroll-container">
        <div ref={setElement}>
          Lock Mode: {lockMode()}
          <br />
          Scrollbar: {allowScrollbar() ? 'visible' : 'hidden'}
        </div>
      </div>

      <div class="controls">
        <label>
          Lock Mode:
          <select
            value={lockMode()}
            onChange={(e) => setLockMode(e.target.value as any)}
          >
            <option value="both">Both Axes</option>
            <option value="x">X-Axis Only</option>
            <option value="y">Y-Axis Only</option>
            <option value="none">Disabled</option>
          </select>
        </label>

        <label>
          <input
            type="checkbox"
            checked={allowScrollbar()}
            onChange={(e) => setAllowScrollbar(e.target.checked)}
          />
          Allow Scrollbar
        </label>
      </div>
    </div>
  );
}
```

</div>

<div slot="vanilla">

```typescript
import { scrollLock, Draggable, Compartment } from '@neodrag/vanilla';

const element = document.getElementById('draggable');
const container = document.getElementById('container');
const lockSelect = document.getElementById('lock-select');
const scrollbarToggle = document.getElementById('scrollbar-toggle');
const statusEl = document.getElementById('status');

let lockMode = 'both';
let allowScrollbar = false;

const scrollLockComp = new Compartment(() => {
  if (lockMode === 'none') return null;

  return scrollLock({
    lockAxis: lockMode,
    allowScrollbar: allowScrollbar,
    container: () => container,
  });
});

new Draggable(element, () => [scrollLockComp]);

function updateStatus() {
  statusEl.textContent = `Lock Mode: ${lockMode}, Scrollbar: ${
    allowScrollbar ? 'visible' : 'hidden'
  }`;

  scrollLockComp.current =
    lockMode === 'none'
      ? null
      : scrollLock({
          lockAxis: lockMode,
          allowScrollbar: allowScrollbar,
          container: () => container,
        });
}

lockSelect.addEventListener('change', (e) => {
  lockMode = e.target.value;
  updateStatus();
});

scrollbarToggle.addEventListener('change', (e) => {
  allowScrollbar = e.target.checked;
  updateStatus();
});
```

</div>
</FrameworkSwitch>

## Common Use Cases

### Mobile-Friendly Dragging

```typescript
// Prevent mobile bounce scrolling
scrollLock({
  lockAxis: 'both',
  allowScrollbar: false, // Hide scrollbars on mobile
});
```

### Modal/Overlay Dragging

```typescript
// Lock body scrolling when dragging modal
scrollLock({
  container: document.body,
  lockAxis: 'both',
});
```

### Horizontal Slider

```typescript
// Allow vertical scrolling, prevent horizontal
scrollLock({
  lockAxis: 'x',
  allowScrollbar: true, // Keep vertical scrollbar
});
```

### Canvas/Editor Tools

```typescript
// Lock scrolling within canvas container
scrollLock({
  container: () => document.getElementById('canvas-container'),
  lockAxis: 'both',
});
```

## Combining with Other Plugins

### With Bounds

```typescript
const plugins = [scrollLock(), bounds(BoundsFrom.viewport())];
```

### Touch-Optimized Setup

```typescript
const plugins = [
  scrollLock({ lockAxis: 'both' }),
  threshold({ distance: 5, delay: 100 }), // Prevent accidental drags
  touchAction('none'), // Disable browser touch behaviors
];
```

### Conditional ScrollLock

```typescript
// Only lock on touch devices
const isTouchDevice = 'ontouchstart' in window;
const plugins = [
  isTouchDevice ? scrollLock() : null,
  bounds(BoundsFrom.parent()),
].filter(Boolean);
```

## Platform Considerations

### iOS Safari

```typescript
// iOS requires specific handling
scrollLock({
  lockAxis: 'both',
  allowScrollbar: false, // Important for iOS
  container: document.body,
});
```

### Desktop vs Mobile

```typescript
const isMobile = /Mobi|Android/i.test(navigator.userAgent);

scrollLock({
  lockAxis: isMobile ? 'both' : 'y', // More aggressive on mobile
  allowScrollbar: !isMobile, // Keep scrollbars on desktop
});
```

## How It Works

The scrollLock plugin prevents scrolling by temporarily modifying CSS properties:

**During drag start:**

1. **Stores original styles** - `user-select`, `touch-action`, `overflow`
2. **Applies lock styles**:
   - `user-select: none` - Prevents text selection
   - `overflow: hidden` - Hides scrollbars (if `allowScrollbar: false`)
   - `touch-action: pan-x/pan-y/none` - Controls touch scrolling direction

**During drag end:**

3. **Restores original styles** - Everything returns to normal

**Target selection:**

- If `container` specified, applies to that element
- If `container` is `document.documentElement` or not specified, applies to `document.body`
- Function containers are called dynamically each time

## API Reference

```typescript
function scrollLock(
  options?: {
    lockAxis?: 'x' | 'y' | 'both';
    container?: HTMLElement | (() => HTMLElement);
    allowScrollbar?: boolean;
  } | null,
): Plugin;
```

**Options:**

- `lockAxis` - Which scrolling to prevent (`'both'` default)
  - `'x'` - Only horizontal scrolling locked
  - `'y'` - Only vertical scrolling locked
  - `'both'` - All scrolling locked
- `container` - Where to apply scroll lock (`document.documentElement` default)
  - `HTMLElement` - Specific element
  - `() => HTMLElement` - Dynamic element selection
- `allowScrollbar` - Keep scrollbars clickable (`false` default)
  - `true` - Scrollbars remain visible and functional
  - `false` - Scrollbars hidden via `overflow: hidden`

**Returns:** A plugin object for use with draggable.

**Browser Support:** All modern browsers, with special handling for iOS Safari touch behaviors.
